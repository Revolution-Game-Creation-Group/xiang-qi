(function(e){function t(t){for(var s,i,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)i=o[u],r[i]&&d.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);p&&p(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,i=1;i<a.length;i++){var o=a[i];0!==r[o]&&(s=!1)}s&&(n.splice(t--,1),e=c(c.s=a[0]))}return e}var s={},i={app:0},r={app:0},n=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0d341e6b":"5ad49bb2","chunk-0da7b746":"bb65d36a"}[e]+".js"}function c(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-0d341e6b":1,"chunk-0da7b746":1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=new Promise(function(t,a){for(var s="css/"+({}[e]||e)+"."+{"chunk-0d341e6b":"0bd2483a","chunk-0da7b746":"c1e9b4f9"}[e]+".css",r=c.p+s,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var l=n[o],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===s||u===r))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){l=d[o],u=l.getAttribute("data-href");if(u===s||u===r)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var s=t&&t.target&&t.target.src||r,n=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=s,delete i[e],p.parentNode.removeChild(p),a(n)},p.href=r;var h=document.getElementsByTagName("head")[0];h.appendChild(p)}).then(function(){i[e]=0}));var s=r[e];if(0!==s)if(s)t.push(s[2]);else{var n=new Promise(function(t,a){s=r[e]=[t,a]});t.push(s[2]=n);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(e),l=function(t){u.onerror=u.onload=null,clearTimeout(d);var a=r[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,n=new Error("Loading chunk "+e+" failed.\n("+s+": "+i+")");n.type=s,n.request=i,a[1](n)}r[e]=void 0}};var d=setTimeout(function(){l({type:"timeout",target:u})},12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=s,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)c.d(a,s,function(t){return e[t]}.bind(null,s));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0015":function(e,t,a){},"0512":function(e,t,a){},1:function(e,t){},"126e":function(e,t,a){},"17c7":function(e,t,a){},"1bde":function(e,t,a){},"1e91":function(e,t,a){"use strict";var s=a("29aa"),i=a.n(s);i.a},"1f8e":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-box-link",on:{click:e.open}},[e._t("default")],2)},i=[],r=a("2f62"),n={name:"message-box-link",props:["mb-target"],methods:{...Object(r["b"])(["registerMessageBox","deregisterMessageBox","openMessageBox"]),open(){this.openMessageBox({target:this.mbTarget})}},created(){this.registerMessageBox({target:this.mbTarget})},destroyed(){this.deregisterMessageBox({target:this.mbTarget})}},o=n,c=a("2877"),l=Object(c["a"])(o,s,i,!1,null,null,null);t["a"]=l.exports},"21bb":function(e,t,a){"use strict";var s=a("b6fa"),i=a.n(s);i.a},2569:function(e,t,a){"use strict";var s=a("d363"),i=a.n(s);i.a},"29aa":function(e,t,a){},"36c9":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-box-container"},[e._l(e.messageBoxesData,function(t){return[e.isMessageBoxRegistered(t.target)?a("message-box",{attrs:{"mb-target":t.target},on:{"mb-exit":t.onExit},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(t.title))]},proxy:!0},{key:"contents",fn:function(){return[a(t.componentName,{tag:"component"})]},proxy:!0}],null,!0)}):e._e()]})],2)},i=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-box",class:e.classObject},[a("div",{ref:"wrapper",staticClass:"message-box__wrapper",on:{click:e.close}},[a("div",{staticClass:"message-box__contents"},[a("span",{staticClass:"message-box__title"},[e._t("title")],2),a("span",{ref:"exit",staticClass:"message-box__exit",on:{click:e.close}},[e._v("X")]),a("div",{staticClass:"message-box__message"},[e._t("contents")],2)])])])},n=[],o=a("2f62"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"button",attrs:{type:"submit"}},[a("span",{staticClass:"button__text"},[e._t("default")],2)])},l=[],u={name:"xq-button"},d=u,p=(a("4322"),a("2877")),h=Object(p["a"])(d,c,l,!1,null,"21c75a8a",null),m=h.exports,g={name:"message-box",props:["onExit","mb-target"],components:{xqButton:m},methods:{...Object(o["b"])(["closeMessageBox","activateMessageBox","deactivateMessageBox"]),addEventListenerFunc(e){this.isOpen&&13===e.keyCode&&this.close()},close(e){e.target!=this.$refs.wrapper&&e.target!=this.$refs.exit||(this.closeMessageBox({target:this.mbTarget}),this.$emit("mb-exit"))}},computed:{...Object(o["c"])(["isMessageBoxOpen"]),classObject(){return{"message-box--active":this.isOpen}},isOpen(){return this.isMessageBoxOpen({target:this.mbTarget})}},mounted(){window.addEventListener("keyup",this.addEventListenerFunc)},destroyed(){window.removeEventListener("keyup",this.addEventListenerFunc)}},v=g,f=(a("4c14"),Object(p["a"])(v,r,n,!1,null,null,null)),x=f.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("xq-info-container",[a("xq-info-group",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Save/Load Game")]},proxy:!0},{key:"content",fn:function(){return[a("p",[e._v("Your game saves automatically as you play!")]),a("p",[e._v("Load your game with the following code: "),a("span",{staticClass:"u-emphasis"},[e._v(e._s(e.playerID))])]),a("p",[e._v("Or by using this "),a("a",{staticClass:"u-link-external",attrs:{href:"/game/"+e.playerID}},[e._v("game link")])])]},proxy:!0}])}),a("xq-info-group",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Invite a Friend")]},proxy:!0},{key:"content",fn:function(){return[a("p",[e._v("Invite a friend to your game with the following code: "),a("span",{staticClass:"u-emphasis"},[e._v(e._s(e.opponentID))])]),a("p",[e._v("Or by sharing this "),a("a",{staticClass:"u-link-external",attrs:{href:"/game/"+e.opponentID}},[e._v("game link")])])]},proxy:!0}])})],1)},b=[],M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-container"},[e._t("default")],2)},_=[],k={name:"info-container"},C=k,w=(a("76bc"),Object(p["a"])(C,M,_,!1,null,null,null)),I=w.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-group",class:e.classObject},[e.hasLabel?a("span",{staticClass:"info-group__label"},[e._t("label")],2):e._e(),a("div",{staticClass:"info-group__content"},[e._t("content")],2)])},B=[],O={name:"info-group",props:["isCentered"],computed:{hasLabel(){return this.$slots.hasOwnProperty("label")},classObject(){var e={"info-group--centered":1==this.$props.isCentered};return e}}},P=O,T=(a("d3f5"),Object(p["a"])(P,S,B,!1,null,null,null)),E=T.exports,D={name:"game-information",components:{xqInfoContainer:I,xqInfoGroup:E},computed:{...Object(o["c"])(["playerColor","redID","blackID"]),playerID(){return 0==this.playerColor?this.blackID:this.redID},opponentID(){return 1==this.playerColor?this.blackID:this.redID}}},j=D,A=Object(p["a"])(j,y,b,!1,null,null,null),G=A.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("xq-info-container",[a("xq-info-group",{scopedSlots:e._u([{key:"content",fn:function(){return[a("p",[e._v("Your game saves automatically as you play!")]),a("p",[e._v("Load your game with the following code: "),a("span",{staticClass:"u-emphasis"},[e._v(e._s(e.playerID))])]),a("p",[e._v("Or by using this "),a("a",{staticClass:"u-link-external",attrs:{href:"/game/"+e.playerID}},[e._v("game link")])])]},proxy:!0}])})],1)},$=[],L={name:"save-game",components:{xqInfoContainer:I,xqInfoGroup:E},computed:{...Object(o["c"])(["playerColor","redID","blackID"]),playerID(){return 0==this.playerColor?this.blackID:this.redID}}},H=L,W=Object(p["a"])(H,q,$,!1,null,null,null),F=W.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("xq-info-container",[a("xq-info-group",{scopedSlots:e._u([{key:"content",fn:function(){return[a("p",[e._v("Invite a friend to your game with the following code: "),a("span",{staticClass:"u-emphasis"},[e._v(e._s(e.opponentID))])]),a("p",[e._v("Or by sharing this "),a("a",{staticClass:"u-link-external",attrs:{href:"/game/"+e.opponentID}},[e._v("game link")])])]},proxy:!0}])})],1)},z=[],N={name:"invite-friend",components:{xqInfoContainer:I,xqInfoGroup:E},computed:{...Object(o["c"])(["playerColor","redID","blackID"]),opponentID(){return 1==this.playerColor?this.blackID:this.redID}}},Y=N,J=Object(p["a"])(Y,R,z,!1,null,null,null),X=J.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{ref:"load-form",staticClass:"load-form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[a("xq-info-container",{staticClass:"load-game"},[a("xq-info-group",{staticClass:"load-game__info",attrs:{isCentered:!0},scopedSlots:e._u([{key:"content",fn:function(){return[a("p",[e._v("Enter game code: ")]),a("xq-input-bar",{staticClass:"load-game__input",attrs:{name:"player-id"}})]},proxy:!0}])}),a("xq-button",{staticClass:"load-game__button"},[e._v("Load")])],1)],1)},U=[],Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("input",{staticClass:"input-bar",attrs:{name:this.name,maxlength:"10"}})},V=[],Z={props:["name"],name:"input-bar"},ee=Z,te=(a("5a08"),Object(p["a"])(ee,Q,V,!1,null,"260c6862",null)),ae=te.exports,se={name:"load-game",components:{xqInfoContainer:I,xqInfoGroup:E,xqButton:m,xqInputBar:ae},methods:{...Object(o["b"])(["resetGameState","closeMessageBox"]),handleSubmit(){var e=this.$refs["load-form"]["player-id"].value;e&&(this.$router.push({name:"game",params:{playerID:e}}),this.closeMessageBox({target:"load-game"}))}}},ie=se,re=(a("554d"),Object(p["a"])(ie,K,U,!1,null,null,null)),ne=re.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("xq-info-container",{staticClass:"game-error"},[a("xq-info-group",{scopedSlots:e._u([{key:"content",fn:function(){return[a("p",[e._v(e._s(e.gameErrorMessage))])]},proxy:!0}])})],1)},ce=[],le={name:"game-error",components:{xqInfoContainer:I,xqInfoGroup:E},computed:{...Object(o["c"])(["gameErrorMessage"])}},ue=le,de=(a("fdd9"),Object(p["a"])(ue,oe,ce,!1,null,null,null)),pe=de.exports,he={name:"message-box-container",components:{MessageBox:x,xqGameInformation:G,xqSaveGame:F,xqInviteFriend:X,xqLoadGame:ne,xqGameError:pe},data(){return{messageBoxesData:[{target:"game-information",title:"Game Information",componentName:"xqGameInformation",onExit(){}},{target:"save-game",title:"Save Game",componentName:"xqSaveGame",onExit(){}},{target:"invite-friend",title:"Invite a Friend",componentName:"xqInviteFriend",onExit(){}},{target:"load-game",title:"Load Game",componentName:"xqLoadGame",onExit(){}},{target:"game-error",title:"Error",componentName:"xqGameError",onExit:()=>{this.$router.push({name:"home"})}}]}},computed:{...Object(o["c"])(["isMessageBoxRegistered"])}},me=he,ge=(a("fe89"),Object(p["a"])(me,s,i,!1,null,null,null));t["a"]=ge.exports},"3e9b":function(e,t,a){},"3f37":function(e,t,a){},4322:function(e,t,a){"use strict";var s=a("84ee"),i=a.n(s);i.a},4869:function(e,t,a){},"4c14":function(e,t,a){"use strict";var s=a("f017"),i=a.n(s);i.a},"554d":function(e,t,a){"use strict";var s=a("bc7c"),i=a.n(s);i.a},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("xq-window-wrapper",[a("router-view")],1)],1)},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"window-wrapper",class:e.classObject,style:e.styleObject},[a("xq-message-box-container"),e._t("default")],2)},o=[],c=a("2f62"),l=a("81f6"),u=a("36c9"),d={name:"window-wrapper",components:{xqMessageBoxContainer:u["a"]},methods:{...Object(c["b"])(["setWindowHeight","setWindowWidth"]),handleWindowResize(){l["a"].$emit("window-resized"),this.setWindowHeight(window.innerHeight),this.setWindowWidth(window.innerWidth);let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),document.documentElement.style.setProperty("--windowHeight",window.innerHeight+"px")}},computed:{...Object(c["c"])(["windowHeight","windowWidth"]),classObject(){var e={};return e["mq-"+this.$mq]=!0,e},styleObject(){var e=.01*this.windowHeight,t=.01*this.windowWidth;return{height:this.windowHeight+"px","--vh":`${e}px`,"--vw":`${t}px`}}},mounted(){this.$nextTick(this.handleWindowResize)},created(){window.addEventListener("resize",this.handleWindowResize)},destroyed(){window.removeEventListener("resize",this.handleWindowResize)}},p=d,h=a("2877"),m=Object(h["a"])(p,n,o,!1,null,null,null),g=m.exports,v=a("91ea"),f={components:{xqWindowWrapper:g,xqBoard:v["a"]}},x=f,y=(a("5c0b"),a("5c64"),Object(h["a"])(x,i,r,!1,null,null,null)),b=y.exports,M=a("8c4f"),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticClass:"home__heading"},[a("xq-head-bar")],1)])},k=[],C=a("6ffa"),w={components:{xqHeadBar:C["a"]},data(){return{}},computed:{...Object(c["c"])(["windowHeight"])},methods:{...Object(c["b"])(["startNewGame","navigateToPage","setMenuType"]),initiateTutorial(){this.$router.push({name:"tutorial"})}},mounted(){this.setMenuType("home")}},I=w,S=(a("21bb"),Object(h["a"])(I,_,k,!1,null,null,null)),B=S.exports;s["a"].use(M["a"]);var O=new M["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:B},{path:"/game/:playerID",name:"game",component:function(){return a.e("chunk-0da7b746").then(a.bind(null,"7d36"))}},{path:"/tutorial",name:"tutorial",component:function(){return a.e("chunk-0d341e6b").then(a.bind(null,"818d"))}}]});const P={state:{windowHeight:0,windowWidth:0,characterArray:["兵","卒","炮","砲","俥","車","傌","馬","象","相","仕","士","帥","將","L","O","A","D","I","N","G","G","A","M","E","!"],redID:null,blackID:null,menuBarType:"game"},getters:{windowHeight:e=>e.windowHeight,windowWidth:e=>e.windowWidth,characterArray:e=>e.characterArray,menuBarType:e=>e.menuBarType},mutations:{setWindowHeight:(e,t)=>{e.windowHeight=t},setWindowWidth:(e,t)=>{e.windowWidth=t},setMenuBarType:(e,t)=>{e.menuBarType=t},setCheckStatus:(e,t)=>{e.checkStatus=t}},actions:{setWindowHeight:({commit:e},t)=>{e("setWindowHeight",t)},setWindowWidth:({commit:e},t)=>{e("setWindowWidth",t)},setMenuBarType:({commit:e},t)=>{e("setMenuBarType",t)},addCapturedPiece:({commit:e},t)=>{e("addCapturedPiece",t)},setCurrentGameID:({commit:e},t)=>{e("setCurrentGameID",t)}}};var T=P;const E={state:{messageBoxes:{},messageBoxPromises:{},messageBoxDestructionSchedule:{},gameErrorMessage:""},getters:{messageBoxes:e=>e.messageBoxes,isAnyMessageBoxOpen:e=>Object.values(e.messageBoxes).reduce((e,t)=>e||t.open,!1),isMessageBoxOpen:e=>t=>e.messageBoxes.hasOwnProperty(t.target)&&e.messageBoxes[t.target].open,isMessageBoxRegistered:e=>t=>e.messageBoxes.hasOwnProperty(t),messageBoxPromise:e=>t=>e.messageBoxPromises[t],gameErrorMessage:e=>e.gameErrorMessage},mutations:{registerMessageBox(e,t){s["a"].set(e.messageBoxes,t.target,{open:!1}),s["a"].nextTick(()=>{e.messageBoxDestructionSchedule[t.target]=!1})},deregisterMessageBox(e,t){e.messageBoxDestructionSchedule[t.target]=!0,s["a"].nextTick(()=>{e.messageBoxDestructionSchedule[t.target]&&s["a"].delete(e.messageBoxes,t.target)})},openMessageBox(e,t){s["a"].set(e.messageBoxes[t.target],"open",!0)},closeMessageBox(e,t){s["a"].set(e.messageBoxes[t.target],"open",!1)},setErrorMessage(e,t){e.gameErrorMessage=t}},actions:{addMessageBoxToState:({commit:e},t)=>{e("registerMessageBox",t)},registerMessageBox:({dispatch:e,state:t},a)=>{var i=e("addMessageBoxToState",a);s["a"].set(t.messageBoxPromises,a.target,i)},deregisterMessageBox:({commit:e},t)=>{e("deregisterMessageBox",t)},openMessageBox:({commit:e},t)=>{e("openMessageBox",t)},closeMessageBox:({commit:e},t)=>{e("closeMessageBox",t)},displayError({commit:e},{errorMessage:t}){e("setErrorMessage",t),e("openMessageBox",{target:"game-error"})}}};var D=E,j=a("bc3a"),A=a.n(j),G=a("8055"),q=a.n(G),$=a("8dee"),L=q()();const H="/api/v1",W={state:{menuType:null,initialBoardMovesLoadedFlag:!1,gameHasLoaded:!1,currentGameID:0,selectedPiece:{row:-1,col:-1,pieceType:0},games:{0:{currentTurn:null,playerColor:null,checkStatus:null,capturedPieces:{0:[],1:[]},moves:[],redID:null,blackID:null}}},getters:{menuType:e=>e.menuType,initialBoardMovesLoadedFlag:e=>e.initialBoardMovesLoadedFlag,gameHasLoaded:e=>e.gameHasLoaded,currentGameID:e=>e.currentGameID,selectedPiece:e=>e.selectedPiece,currentTurn:e=>e.games[e.currentGameID].currentTurn,playerColor:e=>e.games[e.currentGameID].playerColor,checkStatus:e=>e.games[e.currentGameID].checkStatus,capturedPieces:e=>e.games[e.currentGameID].capturedPieces,moves:e=>e.games[e.currentGameID].moves,redID:e=>e.games[e.currentGameID].redID,blackID:e=>e.games[e.currentGameID].blackID,ghostPieces:e=>e.games[e.currentGameID].ghostPieces},mutations:{resetGameState(e){e.currentGameID=0,e.games=Object.assign({},{0:e.games[0]}),e.gameHasLoaded=!1,e.initialBoardMovesLoadedFlag=!1,e.selectedPiece={row:-1,col:-1,pieceType:0}},setInitialBoardMovesLoadedFlag:e=>{e.initialBoardMovesLoadedFlag=!0},setCheckStatus:(e,t)=>{e.games[e.currentGameID].checkStatus=t},switchCurrentTurn:e=>{e.games[e.currentGameID].currentTurn=0==e.games[e.currentGameID].currentTurn?1:0},addCapturedPiece:(e,t)=>{var a=t.pieceType;e.games[e.currentGameID].capturedPieces[(a+1)%2].push(a)},setCurrentGameID:(e,t)=>{e.currentGameID=t},setSelectedPiece:(e,t)=>{e.selectedPiece.row=t.row,e.selectedPiece.col=t.col,e.selectedPiece.pieceType=t.pieceType},setGhostPieces:(e,t)=>{e.games[e.currentGameID].ghostPieces=t},setMenuType:(e,t)=>{e.menuType=t}},actions:{resetGameState({commit:e}){e("resetGameState")},setInitialBoardMovesLoadedFlag({commit:e}){e("setInitialBoardMovesLoadedFlag")},async loadGame({state:e,dispatch:t},a){try{var s=await A.a.get(`${H}/game/${a}`),i=s.data,r={currentTurn:1,playerColor:i.playerColor,checkStatus:0,capturedPieces:{0:[],1:[]},moves:[]};0==i.playerColor?(r.blackID=a,r.redID=i.opponentID):(r.blackID=i.opponentID,r.redID=a),e.games[i.gameID]=r,e.currentGameID=i.gameID,e.games=Object.assign({},e.games),L.emit("clientListenGame",{gameID:i.gameID}),L.on("serverUpdateGame",({moves:t})=>{e.games[i.gameID].moves=t,e.games=Object.assign({},e.games),e.gameHasLoaded=!0})}catch(n){t("displayError",{errorMessage:n.response.data.errorMessage||"There has been an error. Please try again later."})}},setSelectedPiece({commit:e},t){e("setSelectedPiece",t)},setGhostPieces({commit:e},t){e("setGhostPieces",t)},setMenuType({commit:e},t){e("setMenuType",t)},async newGame({commit:e,state:t}){e("resetGameState");var a=$.generate(),s=$.generate(),i=$.generate();O.push({name:"game",params:{playerID:i,isNewGame:!0}});var r={gameID:a,blackID:s,redID:i};await A.a.post(`${H}/game`,r);var n={currentTurn:1,playerColor:1,checkStatus:0,capturedPieces:{0:[],1:[]},moves:[]};n.blackID=s,n.redID=i,t.games[a]=n,t.currentGameID=a,t.games=Object.assign({},t.games),t.gameHasLoaded=!0},setCheckStatus({commit:e},t){e("setCheckStatus",t)},switchCurrentTurn({commit:e}){e("switchCurrentTurn")},pushMove({state:e},t){L.emit("move-made",{gameID:e.currentGameID,moveString:t.moveString})}}};var F=W;s["a"].use(c["a"]);var R=new c["a"].Store({modules:{GeneralStore:T,MessageBoxStore:D,GameStore:F}}),z=a("660e");s["a"].config.productionTip=!1,s["a"].use(z["a"],{breakpoints:{tiny:350,mobile:450,tablet:900,laptop:1250,desktop:1/0},defaultBreakpoint:"desktop"}),new s["a"]({router:O,store:R,render:function(e){return e(b)}}).$mount("#app")},"5a08":function(e,t,a){"use strict";var s=a("4869"),i=a.n(s);i.a},"5c0b":function(e,t,a){"use strict";var s=a("8fba"),i=a.n(s);i.a},"5c64":function(e,t,a){"use strict";var s=a("61ce"),i=a.n(s);i.a},"61ce":function(e,t,a){},6832:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"game-status",class:e.classObject},[a("div",{staticClass:"game-status__turn-info"},[a("div",{staticClass:"game-status__item "},[e._v(e._s(this.checkStatusString))]),a("div",{staticClass:"game-status__divider "},[e._v("•")]),a("div",{staticClass:"game-status__item game-status__item--turn"},[e._v(e._s(this.turnString))])]),a("div",{staticClass:"game-status__player-info"},[a("span",{staticClass:"game-status__player-message"},[e._v(" "+e._s(e.playerColorString)+" ")])])])},i=[],r=a("2f62"),n={name:"game-status",data(){return{checkStatusStrings:["No Check","Check","Checkmate"]}},computed:{...Object(r["c"])(["initialBoardMovesLoadedFlag","currentTurn","checkStatus","playerColor"]),classObject(){return{"game-status--black-turn":0==this.currentTurn,"game-status--red-turn":1==this.currentTurn,"game-status--checkmate":2==this.checkStatus,"game-status--player-red":1==this.playerColor,"game-status--player-black":0==this.playerColor,"game-status--board-loaded":this.initialBoardMovesLoadedFlag}},playerColorString(){return"You are "+(0==this.playerColor?"Black":"Red")},turnString(){var e;return e=2==this.checkStatus?(0==this.currentTurn?"Red ":"Black  ")+"Wins":(0==this.currentTurn?"Black ":"Red ")+"Turn",e},checkStatusString(){return this.checkStatusStrings[this.checkStatus]}}},o=n,c=(a("ba64"),a("2877")),l=Object(c["a"])(o,s,i,!1,null,null,null);t["a"]=l.exports},"6ffa":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"head-bar",class:e.classObject},[a("div",{staticClass:"head-bar__logo"},[a("xq-logo",{attrs:{colorInverted:!this.menuIsOpen}})],1),a("div",{staticClass:"head-bar__title"},[e._v("\n    xiangqi\n  ")]),a("mq-layout",{staticClass:"head-bar__status-bar",attrs:{mq:"tablet+"}},[e._t("default")],2),this.isHomePage?e._e():a("div",{staticClass:"head-bar__menu"},[a("div",{staticClass:"menu-icon",on:{click:e.toggleMenu}},[a("div",{staticClass:"menu-icon__line"})])]),a("div",{staticClass:"head-bar__menu-screen"},[a("xq-menu-bar")],1)],1)},i=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo",class:e.classObject},[a("svg",{staticClass:"logo__svg"},[a("circle",{staticClass:"logo__circle",attrs:{cx:"50%",cy:"50%"}}),a("text",{staticClass:"logo__text",attrs:{x:"50%",y:"63%"}},[e._v("將")])])])},n=[],o={name:"logo",props:["colorInverted"],computed:{classObject(){return{"logo--color-inverted":this.colorInverted}}}},c=o,l=(a("c4ed"),a("2877")),u=Object(l["a"])(c,r,n,!1,null,null,null),d=u.exports,p=a("6832"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"menu-bar",style:e.styleObject},[e._l(e.activeMenuItems,function(t){return[a("li",{staticClass:"menu-bar__item"},["link"==t.type?a("router-link",{attrs:{to:{name:t.target}}},[a("span",{staticClass:"menu-bar__text"},[e._v("\n            "+e._s(t.label)+"\n          ")])]):"action"==t.type?a("span",{staticClass:"menu-bar__text",on:{click:t.target}},[e._v("\n      "+e._s(t.label)+"\n      ")]):"message-box"==t.type?a("span",{staticClass:"menu-bar__text"},[a("xq-message-box-link",{attrs:{mbTarget:t.target}},[e._v(e._s(t.label))])],1):e._e()],1)]})],2),a("xq-foot-bar")],1)},m=[],g=a("2f62"),v=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},f=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"foot-bar"},[a("span",{staticClass:"foot-bar__text"},[e._v("Made by\n    "),a("span",{staticClass:"foot-bar__name"},[a("a",{staticClass:"u-link-external",attrs:{target:"_blank",href:"https://github.com/daddehs1"}},[e._v("daddehs1")])])])])}],x={name:"foot-bar"},y=x,b=(a("f181"),Object(l["a"])(y,v,f,!1,null,null,null)),M=b.exports,_=a("1f8e"),k={name:"menu-bar",components:{xqFootBar:M,xqMessageBoxLink:_["a"]},data(){return{menuItems:{game:[],tutorial:[]}}},created(){var e={type:"action",target:this.newGame,label:"New Game"},t={type:"message-box",target:"load-game",label:"Load Game"},a={type:"message-box",target:"save-game",label:"Save Game"},s={type:"message-box",target:"invite-friend",label:"Invite a Friend"},i={type:"link",target:"tutorial",label:"Tutorial"};this.menuItems.home=[e,t,i],this.menuItems.game=[e,t,a,s,i],this.menuItems.tutorial=[e,t]},methods:{...Object(g["b"])(["newGame"])},computed:{...Object(g["c"])(["windowHeight","menuType"]),activeMenuItems(){return this.menuItems[this.menuType]},styleObject(){return{height:this.windowHeight+"px"}}}},C=k,w=(a("1e91"),Object(l["a"])(C,h,m,!1,null,null,null)),I=w.exports,S={name:"head-bar",components:{xqLogo:d,xqGameStatus:p["a"],xqMenuBar:I},data(){return{menuIsOpen:!1}},methods:{toggleMenu(){this.menuIsOpen=!this.menuIsOpen}},watch:{$route(){this.menuIsOpen=!1}},computed:{isHomePage(){return"home"==this.$route.name},classObject(){return{"head-bar--open":this.menuIsOpen}}},created(){this.isHomePage&&(this.menuIsOpen=!0)}},B=S,O=(a("2569"),Object(l["a"])(B,s,i,!1,null,null,null));t["a"]=O.exports},"76bc":function(e,t,a){"use strict";var s=a("3e9b"),i=a.n(s);i.a},"7a75":function(e,t,a){},"7d54":function(e,t,a){"use strict";var s=a("0015"),i=a.n(s);i.a},"81f6":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var s=a("2b0e");const i=new s["a"]},"84ee":function(e,t,a){},"854e":function(e,t,a){},"8fba":function(e,t,a){},"91ea":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"board",class:e.classObject},[a("svg",{ref:"graphics",staticClass:"board__graphics",attrs:{xmlns:"http://www.w3.org/2000/svg"}},[a("xq-board-art"),e._l(e.ghostPieces,function(t){return!e.isTutorial&&e.ghostPieces?[a("xq-ghost",{ref:"ghost",refInFor:!0,style:e.getTranslatePieceStyleObject(t.row,t.col),attrs:{color:t.pieceColor,isOrigin:t.isOrigin}})]:e._e()}),e._l(e.pieceMatrix,function(t,s){return[e._l(t,function(t,i){return[0!=e.pieceMatrix[s][i]?[a("xq-piece",{key:s+"-"+i+"-"+e.keySuffix,ref:"piece",refInFor:!0,style:e.getTranslatePieceStyleObject(s,i),attrs:{r:s,c:i,pieceType:e.pieceMatrix[s][i],pieceCharacter:e.characterArray[e.pieceMatrix[s][i]-1],isTutorial:e.isTutorial}})]:e._e()]})]}),e._l(e.selectedPieceMoveMap,function(t,s){return[e._l(t,function(t,i){return[e.selectedPieceMoveMap[s][i]?[a("xq-move-map-piece",{key:"move"+s+"-"+i+"-"+e.keySuffix,style:e.getTranslatePieceStyleObject(s,i),attrs:{r:s,c:i,pieceColor:e.selectedPieceColor,invisible:!e.isTutorial}})]:e._e()]})]})],2)])},i=[],r=a("b730"),n=a.n(r),o=a("81f6"),c=a("2f62"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("g",{staticClass:"board-art"},[a("line",{ref:"h-line",attrs:{x1:"5.55%",y1:"5%",x2:"94.44%",y2:"5%"}}),a("line",{ref:"h-line",attrs:{x1:"5.55%",y1:"15%",x2:"94.44%",y2:"15%"}}),a("line",{ref:"h-line",attrs:{x1:"5.55%",y1:"25%",x2:"94.44%",y2:"25%"}}),a("line",{ref:"h-line",attrs:{x1:"5.55%",y1:"35%",x2:"94.44%",y2:"35%"}}),a("line",{ref:"h-line",attrs:{x1:"5.55%",y1:"45%",x2:"94.44%",y2:"45%"}}),a("line",{ref:"h-line",attrs:{x1:"5.55%",y1:"55%",x2:"94.44%",y2:"55%"}}),a("line",{ref:"h-line",attrs:{x1:"5.55%",y1:"65%",x2:"94.44%",y2:"65%"}}),a("line",{ref:"h-line",attrs:{x1:"5.55%",y1:"75%",x2:"94.44%",y2:"75%"}}),a("line",{ref:"h-line",attrs:{x1:"5.55%",y1:"85%",x2:"94.44%",y2:"85%"}}),a("line",{ref:"h-line",attrs:{x1:"5.55%",y1:"95%",x2:"94.44%",y2:"95%"}}),a("line",{attrs:{x1:"5.55%",y1:"5%",x2:"5.55%",y2:"95%"}}),a("line",{attrs:{x1:"94.44%",y1:"5%",x2:"94.44%",y2:"95%"}}),a("line",{attrs:{x1:"16.66%",y1:"5%",x2:"16.66%",y2:"45%"}}),a("line",{attrs:{x1:"27.77%",y1:"5%",x2:"27.77%",y2:"45%"}}),a("line",{attrs:{x1:"38.88%",y1:"5%",x2:"38.88%",y2:"45%"}}),a("line",{attrs:{x1:"50%",y1:"5%",x2:"50%",y2:"45%"}}),a("line",{attrs:{x1:"61.11%",y1:"5%",x2:"61.11%",y2:"45%"}}),a("line",{attrs:{x1:"72.22%",y1:"5%",x2:"72.22%",y2:"45%"}}),a("line",{attrs:{x1:"83.33%",y1:"5%",x2:"83.33%",y2:"45%"}}),a("line",{attrs:{x1:"16.66%",y1:"55%",x2:"16.66%",y2:"95%"}}),a("line",{attrs:{x1:"27.77%",y1:"55%",x2:"27.77%",y2:"95%"}}),a("line",{attrs:{x1:"38.88%",y1:"55%",x2:"38.88%",y2:"95%"}}),a("line",{attrs:{x1:"50%",y1:"55%",x2:"50%",y2:"95%"}}),a("line",{attrs:{x1:"61.11%",y1:"55%",x2:"61.11%",y2:"95%"}}),a("line",{attrs:{x1:"72.22%",y1:"55%",x2:"72.22%",y2:"95%"}}),a("line",{attrs:{x1:"83.33%",y1:"55%",x2:"83.33%",y2:"95%"}}),a("line",{attrs:{x1:"38.88%",y1:"5%",x2:"61.11%",y2:"25%"}}),a("line",{attrs:{x1:"61.11%",y1:"5%",x2:"38.88%",y2:"25%"}}),a("line",{attrs:{x1:"38.88%",y1:"75%",x2:"61.11%",y2:"95%"}}),a("line",{attrs:{x1:"61.11%",y1:"75%",x2:"38.88%",y2:"95%"}})])},u=[],d=(a("9dd7"),a("2877")),p={},h=Object(d["a"])(p,l,u,!1,null,"183fbf1a",null),m=h.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("g",{staticClass:"piece",class:e.getClassObject,on:{click:e.attemptSelect}},[a("circle",{staticClass:"piece__circle piece__circle--outer",attrs:{cx:"0",cy:"0",r:"4%","stroke-width":"1",fill:"white"}}),a("circle",{staticClass:"piece__circle piece__circle--inner",attrs:{cx:"0",cy:"0",r:"3.4%","stroke-width":"1",fill:"white"}}),a("text",{staticClass:"piece__character",attrs:{x:"0",y:"1.5%"}},[e._v(e._s(e.pieceCharacter))])])},v=[],f={props:["r","c","pieceType","pieceCharacter","isTutorial"],methods:{...Object(c["b"])(["setSelectedPiece"]),attemptSelect(){(this.isTutorial||this.currentTurn==this.pieceColor&&this.currentTurn==this.playerColor)&&this.setSelectedPiece({row:this.r,col:this.c,pieceType:this.pieceType})}},computed:{...Object(c["c"])(["currentTurn","playerColor","selectedPiece"]),pieceColor(){return this.pieceType%2},isSelected(){return this.r==this.selectedPiece.row&&this.c==this.selectedPiece.col},getClassObject(){return{"piece--black":0==this.pieceColor,"piece--red":1==this.pieceColor,"piece--selected":this.isSelected}}}},x=f,y=(a("d826"),Object(d["a"])(x,g,v,!1,null,null,null)),b=y.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("g",{staticClass:"move-map-piece",class:e.getClassObject,on:{click:e.handleMoveMapClick}},[a("circle",{staticClass:"move-map-piece__circle",attrs:{r:"4%"}})])},_=[],k={name:"move-map-piece",props:["pieceColor","r","c","invisible"],methods:{handleMoveMapClick(){o["a"].$emit("move-made",{row:this.r,col:this.c})}},computed:{getClassObject(){return{"move-map-piece--black":0==this.pieceColor,"move-map-piece--red":1==this.pieceColor,"move-map-piece--invisible":this.invisible}}}},C=k,w=(a("7d54"),Object(d["a"])(C,M,_,!1,null,null,null)),I=w.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("g",{staticClass:"ghost"},[a("circle",{staticClass:"ghost__circle",class:e.getClassObject,attrs:{cx:"0",cy:"0",r:"4.5%"}})])},B=[],O={props:["color","isOrigin"],methods:{},computed:{getClassObject(){return{"ghost__circle--black":0==this.color,"ghost__circle--red":1==this.color,"ghost__circle--origin":this.isOrigin}}}},P=O,T=(a("e4a8"),Object(d["a"])(P,S,B,!1,null,null,null)),E=T.exports;const D=9,j=10;function A(){return{keySuffix:!1,pieceMatrix:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,15,16,17,18,19,20,21,0],[0,0,22,23,24,25,26,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],localMoves:[],ghostPieces:[],generalLocations:{0:{row:0,col:4},1:{row:9,col:4}},historyStack:[],animationIndex:0,animationInterval:null}}var G={name:"xqBoard",components:{xqBoardArt:m,xqPiece:b,xqMoveMapPiece:I,xqGhost:E},props:["isTutorial"],data:A,methods:{...Object(c["b"])(["setInitialBoardMovesLoadedFlag","openMessageBox","setSelectedPiece","switchCurrentTurn","setCheckStatus","addCapturedPiece","pushMove"]),handleTutorialReset(){this.setBoard()},initializeBoard(){this.isTutorial?(this.setBoard(),this.animateBoard()):(this.resetBoardState(),this.animateBoard({loopAnimation:!0}))},resetBoardState(){let e=A();for(let t in e)this[t]=e[t]},setBoard(){n.a.config({serviceWorker:"//serviceWorker.min.js"}),n.a.Permission.request(),this.pieceMatrix=[[6,8,10,12,14,12,10,8,6],[0,0,0,0,0,0,0,0,0],[0,4,0,0,0,0,0,4,0],[2,0,2,0,2,0,2,0,2],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[1,0,1,0,1,0,1,0,1],[0,3,0,0,0,0,0,3,0],[0,0,0,0,0,0,0,0,0],[5,7,9,11,13,11,9,7,5]]},getXShift(e){var t=50/D,a=100/D;this.playerColor;return t+e*a},getYShift(e){var t=50/j,a=100/j;return t+e*a},getTranslatePieceStyleObject(e,t){var a=0==this.playerColor&&this.gameHasLoaded;return a?{transform:"translate("+(100-this.getXShift(t))+"%, "+(100-this.getYShift(e))+"%)"}:{transform:"translate("+this.getXShift(t)+"%, "+this.getYShift(e)+"%)"}},toggleKeySuffix(){this.keySuffix=!this.keySuffix},handleWindowResize(){this.toggleKeySuffix()},handleMoveMade(e){this.attemptMovePiece(this.selectedPiece,e.row,e.col)},attemptMovePiece(e,t,a,s){var i=e.pieceType%2,r=(e.pieceType+1)%2,n=this.pieceMatrix[t][a];if(this.movePieceWithHistory(e,t,a),this.checkForCheck(i))return this.undoMove(),!1;var o={row:e.row,col:e.col,pieceColor:i,isOrigin:!0},c={row:t,col:a,pieceColor:i,isOrigin:!1};if(this.ghostPieces=[o,c],!this.isTutorial){n&&this.addCapturedPiece({pieceType:n}),this.checkForCheck(r)&&this.checkForCheckmate(r);var l=this.encodeMoveString(e.row,e.col,t,a);this.localMoves.push(l),s||this.pushMove({moveString:l})}return this.setSelectedPiece({row:-1,col:-1,pieceType:0}),this.switchCurrentTurn(),!0},encodeMoveString(e,t,a,s){var i="ABCDEFGHIJ";return i[e]+t+i[a]+s},decodeMoveString(e){var t="ABCDEFGHIJ";return{originRow:t.indexOf(e[0]),originCol:parseInt(e[1]),targetRow:t.indexOf(e[2]),targetCol:parseInt(e[3])}},movePiece(e,t,a){var s=e.row,i=e.col,r=e.pieceType;if(this.setPieceMatrixCell(t,a,r),this.setPieceMatrixCell(s,i,0),13==r||14==r){var n=r%2,o={row:t,col:a};this.$set(this.generalLocations,n,o)}},movePieceWithHistory(e,t,a){var s={checkStatus:this.checkStatus,originRow:e.row,originCol:e.col,originPieceType:e.pieceType,targetRow:t,targetCol:a,targetPieceType:this.pieceMatrix[t][a],generalLocations:Object.assign({},this.generalLocations)};this.movePiece(e,t,a),this.pushEventToHistoryStack(s)},pushEventToHistoryStack(e){this.historyStack.push(e)},popEventFromHistoryStack(){return this.historyStack.pop()},undoMove(){var e=this.popEventFromHistoryStack();this.setCheckStatus(e.checkStatus),this.setPieceMatrixCell(e.originRow,e.originCol,e.originPieceType),this.setPieceMatrixCell(e.targetRow,e.targetCol,e.targetPieceType),this.generalLocations=Object.assign({},e.generalLocations)},setPieceMatrixCell(e,t,a){this.$set(this.pieceMatrix[e],t,a)},checkForCheck(e){for(var t=this.generalLocations[e],a=0;a<this.pieceMatrix.length;a++)for(var s=0;s<this.pieceMatrix[0].length;s++){var i=this.pieceMatrix[a][s];if(0!=i&&i%2!=e&&9!=i&&10!=i){var r={row:a,col:s,pieceType:this.pieceMatrix[a][s]},n=this.getMovableMapByPiece(r);if(1==n[t.row][t.col])return this.setCheckStatus(1),!0}}return this.setCheckStatus(0),!1},checkForCheckmate(e){for(var t=0;t<this.pieceMatrix.length;t++)for(var a=0;a<this.pieceMatrix[0].length;a++){var s=this.pieceMatrix[t][a];if(0!=s&&s%2==e)for(var i={row:t,col:a,pieceType:s},r=this.getMovableMapByPiece(i),n=0;n<r.length;n++)for(var o=0;o<r[0].length;o++)if(1==r[n][o]){this.movePieceWithHistory(i,n,o);var c=this.checkForCheck(e);if(this.undoMove(),!c)return!1}}return this.setCheckStatus(2),!0},getMovableMapByPiece(e){for(var t=[],a=0;a<10;a++)t.push([0,0,0,0,0,0,0,0,0]);var s=e;let i=s.row,r=s.col,n=s.pieceType;switch(n){case 1:let a=i<=4;this.attemptMoveMapAdd(i-1,r,t,e),a&&(this.attemptMoveMapAdd(i,r-1,t,e),this.attemptMoveMapAdd(i,r+1,t,e));break;case 2:let s=i>=5;this.attemptMoveMapAdd(i+1,r,t,e),s&&(this.attemptMoveMapAdd(i,r-1,t,e),this.attemptMoveMapAdd(i,r+1,t,e));break;case 3:case 4:for(var o=r-1,c=!1;o>=0;o--)if(c){if(!this.checkSpaceEmpty(i,o)){this.attemptMoveMapAdd(i,o,t,e);break}}else this.checkSpaceEmpty(i,o)?this.moveMapAdd(i,o,t):c=!0;for(o=r+1,c=!1;o<=8;o++)if(c){if(!this.checkSpaceEmpty(i,o)){this.attemptMoveMapAdd(i,o,t,e);break}}else this.checkSpaceEmpty(i,o)?this.moveMapAdd(i,o,t):c=!0;var l=i+1;for(c=!1;l<=9;l++)if(c){if(!this.checkSpaceEmpty(l,r)){this.attemptMoveMapAdd(l,r,t,e);break}}else this.checkSpaceEmpty(l,r)?this.moveMapAdd(l,r,t):c=!0;for(l=i-1,c=!1;l>=0;l--)if(c){if(!this.checkSpaceEmpty(l,r)){this.attemptMoveMapAdd(l,r,t,e);break}}else this.checkSpaceEmpty(l,r)?this.moveMapAdd(l,r,t):c=!0;break;case 5:case 6:o=r;do{o--,this.attemptMoveMapAdd(i,o,t,e)}while(this.checkSpaceEmpty(i,o));o=r;do{o++,this.attemptMoveMapAdd(i,o,t,e)}while(this.checkSpaceEmpty(i,o));l=i;do{l--,this.attemptMoveMapAdd(l,r,t,e)}while(this.checkSpaceEmpty(l,r));l=i;do{l++,this.attemptMoveMapAdd(l,r,t,e)}while(this.checkSpaceEmpty(l,r));break;case 7:case 8:this.checkSpaceEmpty(i,r-1)&&(this.attemptMoveMapAdd(i+1,r-2,t,e),this.attemptMoveMapAdd(i-1,r-2,t,e)),this.checkSpaceEmpty(i,r+1)&&(this.attemptMoveMapAdd(i+1,r+2,t,e),this.attemptMoveMapAdd(i-1,r+2,t,e)),this.checkSpaceEmpty(i-1,r)&&(this.attemptMoveMapAdd(i-2,r+1,t,e),this.attemptMoveMapAdd(i-2,r-1,t,e)),this.checkSpaceEmpty(i+1,r)&&(this.attemptMoveMapAdd(i+2,r+1,t,e),this.attemptMoveMapAdd(i+2,r-1,t,e));break;case 9:i-2>=5&&(this.checkSpaceEmpty(i-1,r-1)&&this.attemptMoveMapAdd(i-2,r-2,t,e),this.checkSpaceEmpty(i-1,r+1)&&this.attemptMoveMapAdd(i-2,r+2,t,e)),this.checkSpaceEmpty(i+1,r-1)&&this.attemptMoveMapAdd(i+2,r-2,t,e),this.checkSpaceEmpty(i+1,r-1)&&this.attemptMoveMapAdd(i+2,r+2,t,e);break;case 10:i+2<=4&&(this.checkSpaceEmpty(i+1,r-1)&&this.attemptMoveMapAdd(i+2,r-2,t,e),this.checkSpaceEmpty(i+1,r+1)&&this.attemptMoveMapAdd(i+2,r+2,t,e)),this.checkSpaceEmpty(i-1,r-1)&&this.attemptMoveMapAdd(i-2,r-2,t,e),this.checkSpaceEmpty(i-1,r+1)&&this.attemptMoveMapAdd(i-2,r+2,t,e);break;case 11:this.checkInsidePalaceRed(i+1,r+1)&&this.attemptMoveMapAdd(i+1,r+1,t,e),this.checkInsidePalaceRed(i+1,r-1)&&this.attemptMoveMapAdd(i+1,r-1,t,e),this.checkInsidePalaceRed(i-1,r+1)&&this.attemptMoveMapAdd(i-1,r+1,t,e),this.checkInsidePalaceRed(i-1,r-1)&&this.attemptMoveMapAdd(i-1,r-1,t,e);break;case 12:this.checkInsidePalaceBlack(i+1,r+1)&&this.attemptMoveMapAdd(i+1,r+1,t,e),this.checkInsidePalaceBlack(i+1,r-1)&&this.attemptMoveMapAdd(i+1,r-1,t,e),this.checkInsidePalaceBlack(i-1,r+1)&&this.attemptMoveMapAdd(i-1,r+1,t,e),this.checkInsidePalaceBlack(i-1,r-1)&&this.attemptMoveMapAdd(i-1,r-1,t,e);break;case 13:this.checkInsidePalaceRed(i,r+1)&&this.attemptMoveMapAdd(i,r+1,t,e),this.checkInsidePalaceRed(i,r-1)&&this.attemptMoveMapAdd(i,r-1,t,e),this.checkInsidePalaceRed(i-1,r)&&this.attemptMoveMapAdd(i-1,r,t,e),this.checkInsidePalaceRed(i+1,r)&&this.attemptMoveMapAdd(i+1,r,t,e);for(l=i-1;l>=0;l--)if(!this.checkSpaceEmpty(l,r)){if(14!=this.pieceMatrix[l][r])break;this.attemptMoveMapAdd(l,r,t,e)}break;case 14:this.checkInsidePalaceBlack(i,r+1)&&this.attemptMoveMapAdd(i,r+1,t,e),this.checkInsidePalaceBlack(i,r-1)&&this.attemptMoveMapAdd(i,r-1,t,e),this.checkInsidePalaceBlack(i-1,r)&&this.attemptMoveMapAdd(i-1,r,t,e),this.checkInsidePalaceBlack(i+1,r)&&this.attemptMoveMapAdd(i+1,r,t,e);for(l=i+1;l<=9;l++)if(!this.checkSpaceEmpty(l,r)){if(13!=this.pieceMatrix[l][r])break;this.attemptMoveMapAdd(l,r,t,e)}}return t},moveMapAdd(e,t,a){return a[e][t]=1},attemptMoveMapAdd(e,t,a,s){return this.checkSpaceEmptyOrEnemy(e,t,s)?a[e][t]=1:a},checkSpaceEmptyOrEnemy(e,t,a){var s=this.checkSpaceInBounds(e,t);if(s){var i=this.checkSpaceEmpty(e,t),r=this.pieceMatrix[e][t]%2!=a.pieceType%2;return i||r}return!1},checkSpaceInBounds(e,t){return e>=0&&e<=9&&t>=0&&t<=8},checkSpaceEmpty(e,t){return this.checkSpaceInBounds(e,t)&&0==this.pieceMatrix[e][t]},checkInsidePalaceRed(e,t){return e>=7&&e<=9&&t>=3&&t<=5},checkInsidePalaceBlack(e,t){return e>=0&&e<=2&&t>=3&&t<=5},animateBoardTick(e){e=e||{loopAnimation:!1},this.$refs["piece"].forEach(e=>{e.r+e.c==this.animationIndex&&(e.$el.classList.add("piece--selected"),setTimeout(()=>{e.$el.classList.remove("piece--selected")},400))}),this.animationIndex++,this.animationIndex>25&&(this.animationIndex=0,e.loopAnimation||(clearInterval(this.animationInterval),this.finalizeBoardInitialization()))},resolveMoveDeltas(e){e.forEach(e=>{var t=this.decodeMoveString(e.moveString),a=t.originRow,s=t.originCol,i=this.pieceMatrix[a][s],r={row:a,col:s,pieceType:i};this.attemptMovePiece(r,t.targetRow,t.targetCol,!0)})},animateBoard(e){clearInterval(this.animationInterval),this.animationIndex=0,this.animationInterval=setInterval(this.animateBoardTick,80,e)},openWelcomeMessageBox(){this.messageBoxPromise("game-information").then(()=>{this.openMessageBox({target:"game-information"})})},finalizeBoardInitialization(){this.isTutorial||(this.$route.params.isNewGame&&this.openWelcomeMessageBox(),this.$router.replace({name:"game",params:{playerID:this.$route.params.playerID}}))}},computed:{...Object(c["c"])(["initialBoardMovesLoadedFlag","messageBoxPromise","gameHasLoaded","characterArray","selectedPiece","currentTurn","playerColor","checkStatus","currentGameID","moves"]),classObject(){return{"board--piece-selected":-1!=this.selectedPiece.row}},selectedPieceColor(){return this.selectedPiece.pieceType%2},selectedPieceMoveMap(){return-1!=this.selectedPiece.row?this.getMovableMapByPiece(this.selectedPiece):null}},watch:{currentTurn(e,t){console.log(t),e==this.playerColor&&null!==t&&n.a.create("Your Turn!",{icon:"/favicon-120.png",onClick:function(){window.focus(),this.close()}})},$route(){this.initializeBoard()},gameHasLoaded(e){console.log("the game has loaded"),e&&(this.setBoard(),this.animateBoard(),!this.$route.params.isNewGame&&this.moves.length||this.setInitialBoardMovesLoadedFlag())},moves(e){if(e&&e.length){var t=e.filter((e,t)=>e.moveString!=this.localMoves[t]);this.resolveMoveDeltas(t),console.log("the moves have been updated"),this.initialBoardMovesLoadedFlag||this.setInitialBoardMovesLoadedFlag()}}},mounted(){this.initializeBoard(),o["a"].$on("tutorial-reset",this.handleTutorialReset),o["a"].$on("window-resized",this.handleWindowResize),o["a"].$on("move-made",this.handleMoveMade)},destroyed(){o["a"].$off("window-resized",this.handleWindowResize),o["a"].$off("move-made",this.handleMoveMade)}},q=G,$=(a("a3cb"),Object(d["a"])(q,s,i,!1,null,null,null));t["a"]=$.exports},"9dd7":function(e,t,a){"use strict";var s=a("a9fa"),i=a.n(s);i.a},a3cb:function(e,t,a){"use strict";var s=a("7a75"),i=a.n(s);i.a},a9fa:function(e,t,a){},b6fa:function(e,t,a){},ba64:function(e,t,a){"use strict";var s=a("c77a"),i=a.n(s);i.a},bc7c:function(e,t,a){},c4ed:function(e,t,a){"use strict";var s=a("17c7"),i=a.n(s);i.a},c77a:function(e,t,a){},cd2c:function(e,t,a){},d363:function(e,t,a){},d3f5:function(e,t,a){"use strict";var s=a("126e"),i=a.n(s);i.a},d826:function(e,t,a){"use strict";var s=a("cd2c"),i=a.n(s);i.a},e4a8:function(e,t,a){"use strict";var s=a("854e"),i=a.n(s);i.a},f017:function(e,t,a){},f181:function(e,t,a){"use strict";var s=a("1bde"),i=a.n(s);i.a},fdd9:function(e,t,a){"use strict";var s=a("3f37"),i=a.n(s);i.a},fe89:function(e,t,a){"use strict";var s=a("0512"),i=a.n(s);i.a}});
//# sourceMappingURL=app.6a8c9ee9.js.map